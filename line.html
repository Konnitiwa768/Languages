<style>
    textarea{
        height: 80%;
        width: 95%;
        resize: none;
        border: 0px;
        font-size:３0px;
    }
    .a{
        display: flex;
        /*コレ*/align-items: flex-end;
        padding: 5px;
        justify-content: space-between;
        
    }
    .a>div{
        background: #FFF;
        width:100%;

    }
    button{
        font-size:30px;
    }
    .a>div>input{
        width:100%;
        font-size: 40px;
    }
</style>
<button id="btn">名前の設定</button>
<textarea readonly id="text"></textarea>
<div class="a">
        <div ><input id="input" placeholder="言語マン"></div>
</div>
<button id="go">→</button>
<script src="chat.js"></script>
<script>
const btn = document.getElementById('btn');
const go = document.getElementById('go');
const input = document.getElementById('input');
  
  
btn.addEventListener('click', function() {
  input.placeholder=prompt('名前を入力してください');

});
go.addEventListener('click', function() {
    if (input.value.length>0){
     text.value+='\n'+'\n'+input.placeholder+'\t'+input.value
     msg()
    }
     text.scrollTop = text.scrollHeight+10;
     input.value=''
});


function msg(){
     text.scrollTop = text.scrollHeight+10;
var n=[]

var inp=input.value
var m = chats.filter((val,index) => {
    var v = val.replace(/\t.*\t/,'')
    //console.log(v.indexOf(input.value))
    if(v.indexOf(inp)!=-1){
        n.push(index)
    }
return v.indexOf(inp)!=-1;
});
while (m.length==0 && inp.length>0){
m = chats.filter((val,index) => {
    var v = val.replace(/\t.*\t/,'')
    //console.log(v.indexOf(input.value))
    if(v.indexOf(inp)!=-1){
        n.push(index)
    }
return v.indexOf(inp)!=-1;
});
inp=inp.slice(0, -1)
}

var length=100000000000000000000
var index=0
for (i=0;i<m.length;i+=1){
    m[i]= m[i].replace(/\t.*\t/,'')
    var l=m[i].length
    var il=input.value.length
    if ((l-il)**2<length){
    length=(l-il)**2
    index=i
    }
}
//console.log(m[index])
//console.log(n[index])

var chat=chats[n[index]+1].slice(1)
//console.log(chat)
text.value+='\n'+chat

var i=0
while (Math.random()<0.8){
if (n[index]+1+i<chats.length){
i+=1
var chat2=chats[n[index]+1+i].slice(1)
//console.log(chat2)
text.value+='\n'+chat2
}
}
}

</script>
